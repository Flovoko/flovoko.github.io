<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>STRW-Tool — Nachbau (Beispiel)</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#7c3aed;--glass:rgba(255,255,255,0.06)}
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial}
    body{margin:0;background:linear-gradient(180deg,#071029 0%, #071b2b 100%);color:#e6eef8;min-height:100vh;display:flex;align-items:stretch}
    .container{width:100%;max-width:1200px;margin:auto;padding:28px;display:grid;grid-template-columns:360px 1fr;gap:24px}

    .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:18px;box-shadow:0 6px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
    header{display:flex;align-items:center;gap:12px;margin-bottom:8px}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#06b6d4);display:flex;align-items:center;justify-content:center;font-weight:700}
    h1{font-size:18px;margin:0}
    p.lead{margin:6px 0 14px;color:rgba(230,238,248,0.8);font-size:13px}

    .control{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}
    label{font-size:12px;color:rgba(230,238,248,0.8)}
    input[type=range]{width:100%}
    .row{display:flex;gap:8px}
    .small{flex:1}
    select, input[type=color], input[type=number], button{background:var(--card);color:inherit;border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:8px}

    .preview{position:relative;overflow:hidden;border-radius:14px;min-height:520px;display:flex;flex-direction:column}
    .preview .canvas{flex:1;display:flex;align-items:center;justify-content:center;position:relative}
    canvas{width:100%;height:100%;display:block}
    .preview .info{padding:14px;border-top:1px solid rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:space-between}
    .btn{padding:8px 12px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--accent),#06b6d4);cursor:pointer;color:white}
    .ghost{background:transparent;border:1px solid rgba(255,255,255,0.06)}

    .footer-note{font-size:12px;color:rgba(230,238,248,0.6)}

    /* small screens */
    @media (max-width:880px){.container{grid-template-columns:1fr;padding:16px}.panel{padding:12px}.preview{min-height:360px}}
  </style>
</head>
<body>
  <div class="container">
    <aside class="panel">
      <header>
        <div class="logo">ST</div>
        <div>
          <h1>STRW-Tool — Nachbau</h1>
          <p class="lead">Interaktives Demo: Einstellungen links, Live-Vorschau rechts.</p>
        </div>
      </header>

      <div class="control">
        <label for="seed">Seed (Ganzzahl)</label>
        <input id="seed" type="number" class="small" value="1" min="0" step="1">
      </div>

      <div class="control">
        <label for="count">Anzahl Elemente</label>
        <input id="count" type="range" min="1" max="200" value="80">
        <div class="row"><input id="countVal" type="number" value="80" min="1" max="200" class="small"></div>
      </div>

      <div class="control">
        <label for="size">Größe</label>
        <input id="size" type="range" min="1" max="60" value="18">
      </div>

      <div class="control">
        <label>Farben</label>
        <div class="row">
          <input id="c1" type="color" value="#7c3aed">
          <input id="c2" type="color" value="#06b6d4">
        </div>
      </div>

      <div class="control">
        <label for="animate">Animation</label>
        <div class="row">
          <select id="animate"><option value="on">Ein</option><option value="off">Aus</option></select>
          <button id="randomize" class="ghost">Random</button>
        </div>
      </div>

      <div style="margin-top:8px;display:flex;gap:8px">
        <button id="apply" class="btn">Anwenden</button>
        <button id="download" class="ghost">PNG herunterladen</button>
      </div>

      <p class="footer-note" style="margin-top:12px">Dies ist eine Nachbildung — funktional ähnlich, nicht identisch mit der Originalseite.</p>
    </aside>

    <main class="preview panel">
      <div class="canvas">
        <canvas id="stage"></canvas>
        <div style="position:absolute;left:18px;top:18px;background:var(--glass);padding:8px;border-radius:8px;font-size:13px">Live-Vorschau</div>
      </div>
      <div class="info">
        <div>Preview — Auflösung: <span id="res">auto</span></div>
        <div>
          <button id="pause" class="ghost">Pause</button>
          <button id="reset" class="ghost">Reset</button>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Einfaches, deterministisches PRNG (Mulberry32) für reproduzierbare Ergebnisse
    function mulberry32(a){return function(){let t=a+=0x6D2B79F5; t=Math.imul(t^t>>>15, t|1); t^=t+Math.imul(t^t>>>7, t|61); return ((t^(t>>>14))>>>0)/4294967296;}}

    const canvas=document.getElementById('stage');
    const ctx=canvas.getContext('2d');
    const seedInp=document.getElementById('seed');
    const countRange=document.getElementById('count');
    const countVal=document.getElementById('countVal');
    const sizeRange=document.getElementById('size');
    const c1=document.getElementById('c1');
    const c2=document.getElementById('c2');
    const animateSel=document.getElementById('animate');
    const applyBtn=document.getElementById('apply');
    const downloadBtn=document.getElementById('download');
    const randomBtn=document.getElementById('randomize');
    const pauseBtn=document.getElementById('pause');
    const resetBtn=document.getElementById('reset');
    const resLabel=document.getElementById('res');

    let particles=[], anim=true, rng, lastTime=0;

    function resize(){
      const dpr = window.devicePixelRatio || 1;
      canvas.width = Math.floor(canvas.clientWidth * dpr);
      canvas.height = Math.floor(canvas.clientHeight * dpr);
      ctx.setTransform(dpr,0,0,dpr,0,0);
      resLabel.textContent = canvas.width + '×' + canvas.height;
      draw(0);
    }

    function generate(){
      const seed = parseInt(seedInp.value)||1;
      rng = mulberry32(seed);
      const count = parseInt(countRange.value);
      particles = [];
      for(let i=0;i<count;i++){
        const r = rng();
        particles.push({
          x: rng()*canvas.width, y: rng()*canvas.height,
          vx:(rng()-0.5)*0.6, vy:(rng()-0.5)*0.6,
          size: 4 + rng()*parseFloat(sizeRange.value),
          hue: r, t: rng()*Math.PI*2
        });
      }
    }

    function draw(dt){
      const w=canvas.clientWidth, h=canvas.clientHeight;
      ctx.clearRect(0,0,w,h);

      // Hintergrund-Gradient
      const g=ctx.createLinearGradient(0,0,w,h);
      g.addColorStop(0, c1.value);
      g.addColorStop(1, c2.value);
      ctx.fillStyle = g;
      ctx.fillRect(0,0,w,h);

      // leichtes vignette
      const vg = ctx.createRadialGradient(w/2,h/2,Math.min(w,h)*0.2,w/2,h/2,Math.max(w,h));
      vg.addColorStop(0,'rgba(255,255,255,0)');
      vg.addColorStop(1,'rgba(0,0,0,0.38)');
      ctx.fillStyle = vg;
      ctx.fillRect(0,0,w,h);

      // draw particles
      for(let p of particles){
        const alpha = 0.6 + 0.4*Math.sin(p.t + (performance.now()/1000)*0.8);
        ctx.beginPath();
        ctx.fillStyle = `rgba(255,255,255,${0.06 + 0.6*(1-p.hue)})`;
        ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
        ctx.fill();
      }
    }

    function step(ts){
      if(!lastTime) lastTime = ts;
      const dt = ts - lastTime; lastTime = ts;

      if(animateSel.value === 'on' && anim){
        for(let p of particles){
          p.x += p.vx * (dt/16);
          p.y += p.vy * (dt/16);
          p.t += 0.01 * (dt/16);
          // wrap
          if(p.x < -50) p.x = canvas.clientWidth + 50;
          if(p.x > canvas.clientWidth + 50) p.x = -50;
          if(p.y < -50) p.y = canvas.clientHeight + 50;
          if(p.y > canvas.clientHeight + 50) p.y = -50;
        }
      }

      draw(dt);
      requestAnimationFrame(step);
    }

    // interactions
    applyBtn.addEventListener('click', ()=>{ generate(); });
    countRange.addEventListener('input', ()=>{ countVal.value = countRange.value });
    countVal.addEventListener('change', ()=>{ countRange.value = countVal.value; generate(); });
    randomBtn.addEventListener('click', ()=>{ seedInp.value = Math.floor(Math.random()*100000); c1.value = '#'+Math.floor(Math.random()*16777215).toString(16).padStart(6,'0'); c2.value = '#'+Math.floor(Math.random()*16777215).toString(16).padStart(6,'0'); generate(); });
    pauseBtn.addEventListener('click', ()=>{ anim = !anim; pauseBtn.textContent = anim ? 'Pause' : 'Resume'; });
    resetBtn.addEventListener('click', ()=>{ seedInp.value='1'; countRange.value=80; countVal.value=80; sizeRange.value=18; c1.value='#7c3aed'; c2.value='#06b6d4'; generate(); });

    downloadBtn.addEventListener('click', ()=>{
      // render to an offscreen canvas at fixed size
      const out = document.createElement('canvas');
      const W = Math.max(800, canvas.clientWidth);
      const H = Math.max(600, canvas.clientHeight);
      out.width = W; out.height = H; const octx = out.getContext('2d');
      // background
      const g = octx.createLinearGradient(0,0,W,H);
      g.addColorStop(0, c1.value); g.addColorStop(1, c2.value);
      octx.fillStyle = g; octx.fillRect(0,0,W,H);
      // particles scaled
      for(let p of particles){
        octx.beginPath();
        const sx = (p.x/canvas.clientWidth)*W; const sy = (p.y/canvas.clientHeight)*H;
        octx.fillStyle = `rgba(255,255,255,${0.06 + 0.6*(1-p.hue)})`;
        octx.arc(sx, sy, p.size*(W/canvas.clientWidth), 0, Math.PI*2);
        octx.fill();
      }
      const a = out.toDataURL('image/png');
      const link = document.createElement('a'); link.href=a; link.download='strw-snapshot.png'; link.click();
    });

    // initial setup
    window.addEventListener('resize', resize);
    canvas.style.width = '100%'; canvas.style.height = '100%';
    resize();
    generate();
    requestAnimationFrame(step);
  </script>
</body>
</html>
